{% extends "APP_IVG/layout.html" %}
{% load static %}
{% block content %}
<div class="container-fluid" style="background-color: rgba(21, 64, 89, .5); background-size: cover; height: auto; margin: -50px 0; padding: 0; width: 100%;">
	<div class="container-fluid" style="padding: 50px; width: 90%; background-image: linear-gradient(to bottom, rgba(27, 226, 216, .8), rgba(30, 90, 120, .8));">
		<h1 style="font-size: 25px; margin-bottom: 30px;">Aqui você pode controlar os seus dados:</h1>
		<table id="bootstrapdatatable01" class="table table-striped table-responsive" style="color: white; width: 100%; margin bottom: 20px;">
			<thead class="text-white">
				<th>Últimos dados</th>
	            <th>Marca</th>
	            <th>Modelo</th>
	            <th>Motor</th>
	            <th>Ano</th>
	            <th>Status</th>
	            <th>Cor</th>
	            <th>Localidade</th>
	            <th>Combustivel</th>
	            <th>Quilometragem</th>
	            <th>Lucro</th>
	            <th>Preco</th>
	            <th>Porcentagem de lucro</th>
	            <th>Update</th>
	            <th>Deletar</th>
	        </thead>
			{% for q in query1 %}
			<tr id="células01" class="text-white">
				<td>{{forloop.counter}}</td>
				<td> {{ q.marca }} </td>
				<td> {{ q.modelo }} </td>
				<td> {{ q.motor }} </td>
				<td> {{ q.ano }} </td>
				<td> {{ q.get_status_display }} </td>
				<td> {{ q.cor }} </td>
				<td> {{ q.get_localidade_display }} </td>
				<td> {{ q.get_combustivel_display }} </td>
				<td> {{ q.quilometragem }} </td>
				<td> R${{ q.lucro }}</td>
				<td> R${{ q.preco }} </td>
				<td> {{ q.margem_de_lucro }}%</td>
				<td><a class="btn btn-info" href="{% url 'data-Update' q.id %}">Update</a></td>
				<td><a class="btn btn-danger" href="{% url 'data-Deletar' q.id %}"> Deletar</a></td>
			</tr>
			{% endfor %}
		</table>
	</div>	
	<div class= "mx-auto" style="width: 40%;">
		<canvas id="myChart" width="400" height="400"></canvas>
	</div>
<div style="padding: 65px;">
	<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 200, 200, .8)">
		 Marcas por nº de vendas			
		 <i class="bi bi-chevron-down text-dark"></i>
	</button>
	<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(28, 99, 120, 1)); background-color: rgba(27, 205, 205, .8)">
		<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os carros mais vendidos por marca de acordo com a sua cidade:</h1>
	<table id="bootstrapdatatable02" class="table table-striped text-center text-white" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query2 %}
		<tr id="células02" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.marcas}}</td>
		</tr>
		{% endfor%}
	</table>
		</div>
		<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1));
		background-color: rgba(27, 200, 200, .8);">Modelos por nº de vendas
			<i class="bi bi-chevron-down text-dark"></i>
		</button>
		<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, .8)); background-color:  rgba(27, 205, 205, .8) ">
			<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os carros mais vendidos por modelo de acordo com a sua cidade:</h1>
	<table id="bootstrapdatatable03" class="table table-striped text-white table-responsive" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Ano</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query3 %}
		<tr id="células03" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.modelos}}</td>
		</tr>
		{% endfor%}
	</table>		
</div>
		<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 226, 216, .8)">Modelos com maiores margens de lucro
			<i class="bi bi-chevron-down text-dark"></i>
		</button>
		<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 205, 205, .8)">
			<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os modelos com maiores margens de lucro na sua cidade:</h1>
	<table id="bootstrapdatatable04" class="table table-striped text-white table-responsive" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Ano</th>
			<th>Média de lucro</th>
		</thead>
		{%for q in query4 %}
		<tr id="células04" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.medias}} %</td>
		</tr>
		{% endfor%}
	</table>
		</div>
	</div>
	<!-- Script para formotacao de crud -->
	<script>

		$(document).ready(function() {
	        $('#bootstrapdatatable01').DataTable({     
	        	"aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
	          		"iDisplayLength": 3,
	          	"language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ Resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
				}
	        } )
	    } );

       $(document).ready(function() {
          $('#bootstrapdatatable02').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
              "iDisplayLength": 3,
            "language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ Resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
			}
          } );
      } );

        $(document).ready(function() {
          $('#bootstrapdatatable03').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
              "iDisplayLength": 3,
            "language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ Resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
			}         
            } 
          );
        } );

        $(document).ready(function() {
          $('#bootstrapdatatable04').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
              "iDisplayLength": 3,
            "language": {
			    "sEmptyTable": "Nenhum registro encontrado",
				"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
				"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
				"sInfoFiltered": "(Filtrados de _MAX_ registros)",
			    "sInfoThousands": ".",
			    "sLengthMenu": "_MENU_ Resultados por página",
			    "sLoadingRecords": "Carregando...",
			    "sProcessing": "Processando...",
				"sZeroRecords": "Nenhum registro encontrado",
			    "sSearch": "Pesquisar",
		 		    "oPaginate": {
				        "sNext": "Próximo",
				        "sPrevious": "Anterior",
				        "sFirst": "Primeiro",
				        "sLast": "Último",
					    }
			}      
            } 
            );
        } );

</script>
<script type="text/javascript">
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
    </script>
{% endblock content %}