{% extends "APP_IVG/layout.html" %}
{% load static %}
{% block content %}
<div class="container-fluid" style=" background-image: url({% static 'imagens/VisualizarMercado-Background01.jpg' %}); background-size: cover; height: auto; margin: -50px 0 0 0; padding: 10vw 10vw; width: 100%;">
	<div class="container-fluid bg-white text-dark" style="border-radius: 20px; max-width: 950px; padding: 10px 0 0 20px;">
	<table id="bootstrapdatatable" class="table table-striped table-dark table-responsive" width="100%">
		<a href="{% url 'data-InsiraDado' %}" class="btn btn-primary">Adicionar novo dado</a></span>
		<thead>
			<th>Ultimos dados</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Motor</th>
            <th>Ano</th>
            <th>Status</th>
            <th>Cor</th>
            <th>Localidade</th>
            <th>Combustivel</th>
            <th>Quilometragem</th>
            <th>Lucro</th>
            <th>Preco</th>
            <th>Porcentagem de lucro</th>
            <th>Update</th>
            <th>Deletar</th>
        </thead>
		{% for q in query1 %}
		<tr>
			<td>{{forloop.counter}}</td>
			<td> {{ q.marca }} </td>
			<td> {{ q.modelo }} </td>
			<td> {{ q.motor }} </td>
			<td> {{ q.ano }} </td>
			<td> {{ q.get_status_display }} </td>
			<td> {{ q.cor }} </td>
			<td> {{ q.get_localidade_display }} </td>
			<td> {{ q.get_combustivel_display }} </td>
			<td> {{ q.quilometragem }} </td>
			<td> R${{ q.lucro }}</td>
			<td> R${{ q.preco }} </td>
			<td> {{ q.margem_de_lucro }}%</td>
			<td><a class="btn btn-info" href="{% url 'data-Update' q.id %}">Update</a></td>
			<td><a class="btn btn-danger" href="{% url 'data-Deletar' q.id %}"> Deletar</a></td>
		</tr>
		{% endfor %}
	</table>
	<table class="table table-striped table-dark" width="100%">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query2 %}
		<tr>
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.marcas}}</td>
		</tr>
		{% endfor%}
	</table>
	<table class="table table-striped table-dark" width="100%">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Ano</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query3 %}
		<tr>
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.modelos}}</td>
		</tr>
		{% endfor%}
	</table>
	<table class="table table-striped table-dark" width="100%">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Ano</th>
			<th>MÃ©dia de lucro</th>
		</thead>
		{%for q in query4 %}
		<tr>
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.medias|floatformat:4}} %</td>
		</tr>
		{% endfor%}
	</table>
	<img src="data:image/png;base64, {{grafico1|safe}}">	
	<!-- Script para formotacao de crud -->
	<script>
      $(document).ready(function() {
          $('#bootstrapdatatable').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "All"]],
              "iDisplayLength": 3
             } 
          );
      } );
    </script>
   </div>
{% endblock content %}