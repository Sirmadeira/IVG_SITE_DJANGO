{% extends "APP_IVG/layout.html" %}
{% load static %}
{% block content %}
<div class="container-fluid" style="background-color: rgba(21, 64, 89, .5); background-size: cover; height: auto; margin: -50px 0; padding: 0; width: 100%;">
	<div class="container-fluid" style="padding: 50px; width: 90%; background-image: linear-gradient(to bottom, rgba(27, 226, 216, .8), rgba(30, 90, 120, .8));">
		<a id="adicionarNovoDado" href="{% url 'data-InsiraDado' %}" class="btn btn-primary">Adicionar novo dado</a>
	<!-- Tabela crud vendas -->
	<table id="bootstrapdatatable01" class="table table-striped table-responsive" style="width: 100%; margin bottom: 20px;">
		<thead class="text-white">
			<th>Últimos dados</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Motor</th>
            <th>Ano</th>
            <th>Status</th>
            <th>Cor</th>
            <th>Localidade</th>
            <th>Combustivel</th>
            <th>Quilometragem</th>
            <th>Lucro</th>
            <th>Preco</th>
            <th>Porcentagem de lucro</th>
            <th>Update</th>
            <th>Deletar</th>
        </thead>
		{% for q in query1 %}
		<tr id="células01" class="text-white">
			<td>{{forloop.counter}}</td>
			<td> {{ q.marca }} </td>
			<td> {{ q.modelo }} </td>
			<td> {{ q.motor }} </td>
			<td> {{ q.ano }} </td>
			<td> {{ q.get_status_display }} </td>
			<td> {{ q.cor }} </td>
			<td> {{ q.get_localidade_display }} </td>
			<td> {{ q.get_combustivel_display }} </td>
			<td> {{ q.quilometragem }} </td>
			<td> R${{ q.lucro }}</td>
			<td> R${{ q.preco }} </td>
			<td> {{ q.margem_de_lucro }}%</td>
			<td><a class="btn btn-info" href="{% url 'data-Update' q.id %}">Update</a></td>
			<td><a class="btn btn-danger" href="{% url 'data-Deletar' q.id %}"> Deletar</a></td>
		</tr>
		{% endfor %}
	</table>
</div>
	<div style="padding: 65px;">
		<p></p>
		<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 200, 200, .8)">
			 Marcas por nº de vendas			
			 <i class="bi bi-chevron-down text-dark"></i>
		</button>
		<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(28, 99, 120, 1)); background-color: rgba(27, 205, 205, .8)">
			<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os carros mais vendidos por marca de acordo com a sua cidade:</h1>
		<table id="bootstrapdatatable02" class="table table-striped text-center text-white" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query2 %}
		<tr id="células02" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.marcas}}</td>
		</tr>
		{% endfor%}
	</table>
</div>
		<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1));
		background-color: rgba(27, 200, 200, .8);">Modelos por nº de vendas
			<i class="bi bi-chevron-down text-dark"></i>
		</button>
		<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, .8)); background-color:  rgba(27, 205, 205, .8) ">
			<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os carros mais vendidos por modelo de acordo com a sua cidade:</h1>
		<table id="bootstrapdatatable03" class="table table-striped text-white table-responsive" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Motor</th>
			<th>Ano</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query3 %}
		<tr id="células03" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.motor}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.modelos}}</td>
		</tr>
		{% endfor%}
		</table>		
</div>
		<button class="accordion text-white" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 226, 216, .8)">Modelos com maiores margens de lucro
			<i class="bi bi-chevron-down text-dark"></i>
		</button>
		<div class="panel" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(30, 90, 120, 1)); background-color: rgba(27, 205, 205, .8)">
			<h1 class="text-white mt-4" style="font-size: 25px;">Aqui você pode consultar os modelos com maiores margens de lucro na sua cidade:</h1>
		<table id="bootstrapdatatable04" class="table table-striped text-white table-responsive" style="width: 50%; background-color: rgba(0, 0, 0, 0); margin: auto;">
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Motor</th>
			<th>Ano</th>
			<th>Média de lucro</th>
		</thead>
		{%for q in query4 %}
		<tr id="células04" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.motor}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.medias|floatformat:4}} %</td>
		</tr>
		{% endfor%}
		</table>
		</div>
		<!-- Tabela crud compras -->
		<table>
		<thead class="text-white">
			<th>Últimos dados</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Motor</th>
            <th>Ano</th>
            <th>Status</th>
            <th>Cor</th>
            <th>Localidade</th>
            <th>Combustivel</th>
            <th>Quilometragem</th>
            <th>Preco</th>
            <th>Update</th>
            <th>Deletar</th>
        </thead>
		{% for q in query5 %}
		<tr id="células01" class="text-white">
			<td>{{forloop.counter}}</td>
			<td> {{ q.marca }} </td>
			<td> {{ q.modelo }} </td>
			<td> {{ q.motor }} </td>
			<td> {{ q.ano }} </td>
			<td> {{ q.get_status_display }} </td>
			<td> {{ q.cor }} </td>
			<td> {{ q.get_localidade_display }} </td>
			<td> {{ q.get_combustivel_display }} </td>
			<td> {{ q.quilometragem }} </td>
			<td> R${{ q.preco }} </td>
			<td><a class="btn btn-info" href="{% url 'datac-Update' q.id %}">Update</a></td>
			<td><a class="btn btn-danger" href="{% url 'datac-Deletar' q.id %}"> Deletar</a></td>
		</tr>
		{% endfor %}
	</table>
	<!-- Tabela marcas com mais compras-->
	<table>
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>N* de compras</th>
		</thead>
		{%for q in query6 %}
		<tr id="células02" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.marcas}}</td>
		</tr>
		{% endfor%}
	</table>
	<!-- Tabela modelos com mais compras-->
	<table>
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Motor</th>
			<th>Ano</th>
			<th>N* de vendas</th>
		</thead>
		{%for q in query7 %}
		<tr id="células03" class="text-white">
			<td>{{forloop.counter}}</td>
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.motor}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.modelos}}</td>
		</tr>
		{% endfor%}
	</table>
	<!-- Tabela modelos com precos medios  -->
	<table>
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Motor</th>
			<th>Ano</th>
			<th>Preço medio</th>
		</thead>
		{%for q in query8 %}
		<tr id="células03" class="text-white">
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.motor}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.precos}}</td>
		</tr>
		{% endfor%}
	</table>
	<!-- Tabela modelos com precos -->
	<table>
		<thead>
			<th>Posicao</th>
			<th>Marca</th>
			<th>Modelo</th>
			<th>Motor</th>
			<th>Ano</th>
			<th>Preço medio</th>
		</thead>
		{%for q in query9 %}
		<tr id="células03" class="text-white">
			<td>{{q.marca}}</td>
			<td>{{q.modelo}}</td>
			<td>{{q.motor}}</td>
			<td>{{q.ano}}</td>
			<td>{{q.precos}}</td>
		</tr>
		{% endfor%}
	</table>
</div>
	<!-- Script para formotacao de crud e datatables -->
	<script>
		// Datatables scripts de configuracao para traducao
			$(document).ready(function() {
            $('#bootstrapdatatable01').DataTable({     
            	"aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
              		"iDisplayLength": 3,
              	"language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
				}
	        } )
	    } );

       $(document).ready(function() {
          $('#bootstrapdatatable02').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
            "iDisplayLength": 3,
            "language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
			}
          } );
      } );
        $(document).ready(function() {
          $('#bootstrapdatatable03').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
            "iDisplayLength": 3,
            "language": {
			        "sEmptyTable": "Nenhum registro encontrado",
					"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
					"sInfoFiltered": "(Filtrados de _MAX_ registros)",
				    "sInfoThousands": ".",
				    "sLengthMenu": "_MENU_ resultados por página",
				    "sLoadingRecords": "Carregando...",
				    "sProcessing": "Processando...",
					"sZeroRecords": "Nenhum registro encontrado",
				    "sSearch": "Pesquisar",
			 		    "oPaginate": {
					        "sNext": "Próximo",
					        "sPrevious": "Anterior",
					        "sFirst": "Primeiro",
					        "sLast": "Último",
					    }
			}         
            } 
          );
        } );

        $(document).ready(function() {
          $('#bootstrapdatatable04').DataTable({     
            "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "Todos"]],
              "iDisplayLength": 3,
            "language": {
			    "sEmptyTable": "Nenhum registro encontrado",
				"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
				"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
				"sInfoFiltered": "(Filtrados de _MAX_ registros)",
			    "sInfoThousands": ".",
			    "sLengthMenu": "_MENU_ resultados por página",
			    "sLoadingRecords": "Carregando...",
			    "sProcessing": "Processando...",
				"sZeroRecords": "Nenhum registro encontrado",
			    "sSearch": "Pesquisar",
		 		    "oPaginate": {
				        "sNext": "Próximo",
				        "sPrevious": "Anterior",
				        "sFirst": "Primeiro",
				        "sLast": "Último",
					    }
			}      
            } 
            );
        } );
    </script>
{% endblock content %}